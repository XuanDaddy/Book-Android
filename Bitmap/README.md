# Bitmap

### 位图vs矢量图

* 位图

  位图也叫做像素图，构成点阵图的最小单位是象素，位图就是由象素阵列的排列来实现其显示效果的，**缩放会失真**。

* 矢量图

  矢量图也叫做向量图，矢量图并不纪录画面上每一点的信息，而是纪录了元素形状及颜色的算法，当你打开一付矢量图的时候，软件对图形象对应的函数进行运算，将运算结果[图形的形状和颜色]显示给你看。无论显示画面是大还是小，画面上的对象对应的算法是不变的，所以，即使对画面进行倍数相当大的缩放，其显示效果仍然相同，**缩放不会失真**。

### 图片压缩

图片的压缩分为有损压缩和无损压缩两种。

* 有损压缩

  在压缩文件大小的过程中，损失了一部分图片的信息，也即降低了图片的质量，并且这种损失是不可逆的，我们不可能从有一个有损压缩过的图片中恢复出全来的图片。

* 无损压缩

  在压缩文件大小的过程中，图片的质量没有任何损耗。我们任何时候都可以从无损压缩过的图片中恢复出原来的信息。

### 图片格式

目前移动端Android平台原生支持的图片格式主要有：JPEG、PNG、GIF、BMP和WebP（自Android4.0开始支持），但是在Android应用开发中能够使用的编解码格式只有其中三种：JPEG、PNG、WebP，图片格式可以通过查看Bitmap类的CompressFormat枚举值来确定。

```java
    /**
     * Specifies the known formats a bitmap can be compressed into
     */
    public enum CompressFormat {
        JPEG    (0),
        PNG     (1),
        WEBP    (2);

        CompressFormat(int nativeInt) {
            this.nativeInt = nativeInt;
        }
        final int nativeInt;
    }
```

#### JPEG

JPEG是一种广泛使用的有损压缩图像的标准格式，它不支持透明和多帧动画，一般影视类作品最终都是以JPEG格式展示。通过控制压缩比，可以调整图片大小。

#### PNG

PNG是无损的位图。

PNG的优点在于，它压缩了图片的数据，使得同样效果的图片，PNG格式的文件大小要比BMP小得多。当然，PNG图片还是要比JPEG、GIF大得多。

**手机对png情有独钟，会对其进行硬件加速，所以同样一张背景图，png虽然体积大，但是加载速度更快**。

#### WebP

WebP是谷歌开发的一种新图片格式，WebP是同时支持有损和无损压缩的位图。

在无损压缩的情况下，相同质量的WebP图片，文件大小要比PNG小26%；
在有损压缩的情况下，具有相同图片精度的WebP图片，文件大小要比JPEG小25%~34%；

####SVG

SVG是无损的、矢量图。SVG图片由直线和曲线以及绘制它们的方法组成。当你放大一个SVG图片的时候，你看到的还是线和曲线，而不会出现像素点。这意味着SVG图片在放大时，不会失真。

SVG是很多种矢量图中的一种，它的特点是使用XML来描述图片。

####NinePatch

### 对比

| 图片格式 | 压缩方式 |     压缩方式      | 背景透明 | 体积 |
| :------: | :------: | :---------------: | :------: | :--: |
|   JPEG   |   位图   |     有损压缩      |  不支持  | 较小 |
|   PNG    |   位图   |     无损压缩      |   支持   |  大  |
|   WebP   |   位图   | 有损压缩&无损压缩 |   支持   |  小  |
|   SVG    |  矢量图  |     无损压缩      |    无    | xml  |

### 总结

1. WebP格式在Android平台上应用，优势主要是它能以更小的体积展示质量相近的图片，这意味着 **节省更多的用户数据流量，更快的图片下载速度，更少的磁盘存储空间占用**；它的局限主要是要在Android 4.3及以上才能完美支持，但是目前Android 4.3 以下还有一定用户量并不能完全放弃。
2. 资源文件使用**PNG**。
3. 网络图片使用**JPEG**。